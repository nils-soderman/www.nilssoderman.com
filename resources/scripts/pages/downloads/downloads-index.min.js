const MAX_ITEMS=5,TAGS_HOLDER=document.getElementById("tags"),ITEMS_HOLDER=document.getElementById("dl-items"),NO_RESULTS_HOLDER=document.getElementById("no-results"),DATA_URL="../resources/data/download-items.json";let DOWNLOAD_ITEMS=[];function Filter(){const e=document.getElementById("search-filter").value;let t=document.querySelector('input[name="tag-filter"]:checked').value;"All"==t&&(t=null);const n=""!=e||null!=t;let d=0;DOWNLOAD_ITEMS.forEach(a=>{if(d>MAX_ITEMS)a.Node.hidden=!0;else{if(!n)return a.Node.hidden=!1,void d++;if(!t||a.Data.tags.includes(t)){for(let t of e.split(" "))if(t=t.toLowerCase(),!a.Data.title.toLowerCase().includes(t)&&!a.Data.desc.toLowerCase().includes(t))return void(a.Node.hidden=!0);a.Node.hidden=!1,d++}else a.Node.hidden=!0}}),NO_RESULTS_HOLDER.hidden=0!=d}function AddTag(e){const t=document.createElement("input"),n=document.createElement("label"),d="tag-"+e.toLowerCase();return n.innerHTML=e,n.htmlFor=d,n.className="tag-label",t.id=d,t.type="radio",t.onchange=Filter,t.name="tag-filter",t.value=e,t.className="tag-input",TAGS_HOLDER.appendChild(t),TAGS_HOLDER.appendChild(n),t}function CreateListItem(e,t,n){const d=document.createElement("div");d.className="dl-item";const a=document.createElement("a");a.href="./"+n;const l=document.createElement("img");l.width=320,l.height=150,l.src="./"+n+"/thumbnail.jpg",l.className="dl-img",l.alt=e,a.appendChild(l),d.appendChild(a);const o=document.createElement("div");o.className="dl-text";const c=document.createElement("a");c.href="./"+n;const i=document.createElement("h2");i.className="dl-title",i.innerHTML=e,c.appendChild(i),o.appendChild(c);const s=document.createElement("p");return s.className="dl-description",s.innerHTML=t,o.appendChild(s),d.appendChild(o),d}function _DataRecived(e){let t=[];document.getElementById("loading").remove(),document.getElementById("page-content").hidden=!1,JSON.parse(e).items.forEach(e=>{e.tags.forEach(e=>{t.includes(e)||t.push(e)});const n=CreateListItem(e.title,e.desc,e.page);DOWNLOAD_ITEMS.push({Node:n,Data:e}),ITEMS_HOLDER.appendChild(n)}),Node=AddTag("All"),Node.checked=!0,t.sort(),t.forEach(e=>{AddTag(e)})}function main(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&_DataRecived(e.responseText)},e.open("GET",DATA_URL,!0),e.send()}main();